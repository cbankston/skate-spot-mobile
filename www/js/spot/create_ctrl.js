angular  .module('spot')  .controller('CreateSpotCtrl', CreateSpotCtrl);CreateSpotCtrl.$inject = ['$scope', '$state', 'SpotsRepo'];function CreateSpotCtrl($scope, $state, SpotsRepo){  refresh_location();  $scope.create_spot = function(data) {    data.lat = $scope.position.coords.latitude;    data.long = $scope.position.coords.longitude;    SpotsRepo.create(data).then(function() {      $state.go('tab.search');    }, function() {    });  };  function  refresh_location(){    console.log('performing refresh');    navigator.geolocation.getCurrentPosition(success, error);    function success(position) {      console.log('refresh complete');      $scope.position = position;      $scope.$broadcast('scroll.refreshComplete');    }    function error(err) {      console.log('refresh error');      $scope.position = 'There was an error getting your location';      $scope.$broadcast('scroll.refreshComplete');    }  }}